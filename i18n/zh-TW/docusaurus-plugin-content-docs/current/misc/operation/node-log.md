# 節點日誌

本頁詳細介紹了 Kaia 節點的一些重要或常見問題日誌。
如果 Kaia 日誌被修改或新增/刪除，請同時編輯此頁面。

有關日誌類型的詳細信息，請參閱 [log_modules.go](https://github.com/kaiachain/kaia/blob/dev/log/log_modules.go)

如果您遇到任何異常情況，請通過 [github](https://github.com/kaiachain/kaia/issues)、[Kaia 論壇](https://devforum.kaia.io/) 或 [Discord](https://discord.com/KaiaOfficial) 向 kaia 團隊報告。

## 錯誤日誌

| 日誌類型                  | 節點類型     | 日誌信息                                                                                                                                                                                                                                                                                                                                                                     | 說明                                                                                                                                                  | 建議指南                                                                                                               |
| :-------------------- | :------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------- |
| Blockchain            | CN/PN/EN | ########## BAD BLOCK #########Chain config: %v<br/><br/>Number: %vHash: 0x%x%v<br/><br/>Error: %v##############################                                                                                                                                                                          | 當接收到的收據和執行結果不一致時，就會出現壞塊。 如果節點停止時出現壞塊日誌，可能有兩個原因。  <br/>- 案例 1. 節點配置錯誤，如二進制版本。  <br/>- 案例 2. 代碼有問題。 其他節點很可能也會遇到同樣的問題。 | 此錯誤非常嚴重，因此如果您發現任何壞塊，請向 Kaia GitHub 倉庫提交問題或報告。                                                                      |
| ConsensusIstanbulCore | CN/PN/EN | **Drop an empty message from timeout channel**                                                                                                                                                                                                                                                                                                                           | 這意味著換輪計時器將過期。 如果計時器意外關閉，則會打印此錯誤信息。                                                                                                                  | 錯誤可能在啟動下載程序時發生。  檢查並打印下一條日誌："塊同步開始"。                                                                               |
| NetworksP2P           | CN/PN/EN | **Protocol istanbul/64 failed** id=04680a827fa1b240 conn=staticdial err="write tcp 10.117.2.105:34396->10.117.2.27:32323: use of closed etwork connection" <br/><br/>**Protocol istanbul/64 failed** err="shutting down" | 當另一個節點斷開連接時，可以打印該日誌。 其後通常會出現 "斷開 P2P 對等體 "日誌。                                                                                                       | 檢查斷開的對等設備是否再次連接。 如果未重新連接，請檢查網絡狀態或對等連接 [admin_peers](../../../references/json-rpc/admin/peers) |
| NodeCN                | CN       | **fail to SendNewBlockHashes** err="write tcp 10.117.2.124:24108->10.117.2.108:32323: use of closed network connection"  <br/><br/>**fail to SendNewBlockHashes** err="shutting down"                                    | 與 "伊斯坦布爾/64 協議失敗 "相同                                                                                                                                | 與 "伊斯坦布爾/64 協議失敗 "相同                                                                                               |
| NodeCN                | CN       | **fail to SendNewBlock** peer=d35220eccdb0de7b err="shutting down"                                                                                                                                                                                                                                                                                                       | 與 "伊斯坦布爾/64 協議失敗 "相同                                                                                                                                | 與 "伊斯坦布爾/64 協議失敗 "相同                                                                                               |
| NetworksRPC           | 英文（大部分）  | **FastWebsocketHandler fail to upgrade message** error="websocket: version != 13"                                                                                                                                                                                                                                                                        | WebSocket 連接的版本問題                                                                                                                                   | 請求頭應包含 "Sec-Websocket-Version "字段，其值設為 13。 您可能沒有使用過 kaia rpc 客戶端。                                                  |

## 警告日誌

| 日誌類型                  | 節點類型     | 日誌信息                                                                                                                                                                                                                                                                                                                                                             | 說明                                                                             | 建議指南                                                                                                                                        |
| :-------------------- | :------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------ |
| Blockchain            | CN/PN/EN | **Upgrade database version** from=N/A to=3                                                                                                                                                                                                                                                                                                                       | 它記錄在節點啟動的開始階段                                                                  | 你不需要處理這些。                                                                                                                                   |
| ConsensusIstanbulCore | CN       | **[RC]** round=                                                                                                                                                                                                                                                                                              | 回合更改日誌以 [RC] 標記開始。         | 如果一輪或兩輪沒有結束，而是繼續上升，則應首先分析網絡狀態或對等連接。  對等連接檢查 api：[admin_peers](../../../references/json-rpc/admin/peers)                |
| ConsensusIstanbulCore | CN       | **unexpected request**  address= state="Accept request" seq=312 err="old message" number=311 hash=d960ea…6df6de                                                                                                                                                                                                                                                  | 提議者埋下了地雷，但結果卻出乎意料。 在大多數情況下，它太舊了，不可能是新塊。                                        | 你不需要處理這些。                                                                                                                                   |
| 節點                    | CN/PN/EN | **Failed doConnTypeHandshake** addr=10.117.2.252:28516 conn=inbound conntype=-1 err="read tcp 10.117.2.78:32324->10.117.2.252:28516: i/o timeout | 通過撥號，兩個 P2P 對等體建立了連接。 如果設置失敗，將打印此日誌。                                           | 檢查斷開的對等設備是否再次連接。 如果沒有，請檢查網絡狀態或對等連接 對等連接檢查 api: [admin_peers](../../../references/json-rpc/admin/peers) |
| NodeCN                | PN/EN    | **Failed to filter bodies** peer=c02e4b4d471c56b9 lenTxs=1                                                                                                                                                                                                                                                                                                       | 一個節點在獲取正文時收到了不需要的塊標頭。  - lenTxs：未請求的 tx 數量                                     | 你不需要處理這些。                                                                                                                                   |
| Work                  | CN       | **Transaction aborted due to time limit** hash=                                                                                                                                                                                                                                                                                                                  | 挖礦時區塊的執行時間不應超過 250 毫秒，因此最後一筆交易可能會因為這個時間限制而中止。                                  | 確認交易進入區塊。                                                                                                                                   |
| Work                  | CN       | **Transaction failed, account skipped** hash=b1b26c...6b220a err="insufficient balance for transfer"<br/><br/>Error(before v1.6.2)<br/>Warn(after v1.6.2)                                                  | 在挖礦過程中，由於 "from "賬戶餘額不足，交易無法執行（理論上，當交易創建並進入 txpool 時餘額充足，但實際執行時餘額不足，就會出現這種情況）。 | 檢查 "from "賬戶是否真的失去平衡。                                                                                                                       |

## 信息日誌

信息 "日誌包含附加信息，可讓您更多地瞭解節點狀態，因此您無需處理 "信息 "級日誌。

| 日誌類型        | 節點類型     | 日誌信息                                                                                                                                                                                                                                                                              | 說明                                                                                                                                                                                                                                                                                                                                                                                                                                |
| :---------- | :------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Blockchain  | CN/PN/EN | **Regenerated local transaction journal** transactions=0 accounts=0                                                                                                                                                                                                               | 節點關閉時，本地 tx 會被記錄到一個文件中（默認文件名為 transactions.rlp）。 當節點使用日誌文件重新啟動時，本地事務可根據該文件重新生成。  - 事務：再生本地事務的編號。  - 賬戶：再生賬戶的數量（==從）                                                                                                                                                                                                                                                                                               |
| Blockchain  | CN/PN/EN | **Inserted a new block** number=14 hash=13cbfc…f007fc txs=0 gas=0 elapsed=793.458µs  processTxs=167ns finalize=157.708µs validateState=7.542µs totalWrite=443.417µs trieWrite=256.667µs           | 如果該節點不是該區塊的提議者，且共識成功，則該節點已執行（==驗證）該區塊。 換句話說，就是插入一個數據塊。  - gas：執行 tx 過程中消耗的氣體總量。  該字段在測試網絡時通常用於查找每個區塊的用氣量。                                                                                                                                                                                                                                                                                                                         |
| NetworksP2P | CN/PN/EN | **[Dial] Add dial candidate from static nodes**  id=62a08a4b9f091c4b NodeType=0 ip=10.117.2.8 mainPort=32323 port=[32323] | 連接了一個新的 P2P 對等節點，它是一個靜態節點。 使用 static-nodes.json 或 addpeer api 手動添加的節點稱為靜態節點。 如果是多通道，則使用兩個端口。 ex. [32323, 32324].  - id: dst 對等節點 id - NodeType: dst 節點類型（cn,pn,en,bn） - ip: dst ip - mainPort: dst TCP 監聽端口號 - port: dst TCP 監聽端口號，包括主端口和子端口。 |
| NetworksP2P | CN/PN/EN | **Added a multichannel P2P Peer** id=28a6760472a078fb conn=staticdial peerID=28a6760472a078fb                                                                                                                                                                                     | 新對等點作為多通道對等點連接。  - id/peerID：我的節點的對等 ID -conn：連接類型 -inbound：有人連接我 -staticdial：靜態連接，如 static-nodes.json 或 addPeer -trustdial：信任連接，如 trust-nodes.json。 即使連接數超過了最大限制，也可以始終重新連接並建立連接。                                                                                                                                                                                                                 |
| NetworksP2P | CN/PN/EN | **Disconnected a multichannel P2P Peer** id=28a6760472a078fb conn=inbound    peerID=28a6760472a078fb peerName=Kaia/v1.7.3+acae89350c/darwin-arm64/go1.18.1 err=EOF                                                | 多通道對等設備斷開連接。  - peerName：它顯示了我的節點信息 - 錯誤：連接斷開的原因                                                                                                                                                                                                                                                                                                                                                                                  |
| 網絡P2P       | CN/PN/EN | **ProtocolManager.processConsensusMsg closed** id=28a6760472a078fb conn=inbound    PeerName=Kaia/v1.7.3+acae89350c/darwin-arm64/go1.18.1                                                          | 當一個 P2P 節點斷開連接時，它們之間的共識信息通道也會關閉。                                                                                                                                                                                                                                                                                                                                                                                                  |
| 存儲狀態數據庫     | CN/PN/EN | **Persisted trie from memory database** blockNum=23460 updated nodes=4 updated nodes size=499.00B time=539.959µs  gcnodes=68  gcsize=10.55kB gctime=226.499µs  livenodes=245 livesize=37.80kB     | 打印此日誌是為了通知您 trie db 已提交。 在這裡，提交指的是將數據庫更改刷新到實際數據庫中。  定期提交。  - 案例 1. 如果節點是全節點，則每 128 個區塊進行一次 trie 提交。  - 案例 2. 如果節點是存檔節點，則會對每個區塊進行 trie 提交。  承諾也是在接下來的情況下做出的。  - , 節點關閉時會進行一次提交。  - 當內存大小超過上限時，就會進行提交。  小貼士  - gc 代表垃圾收集。 在這裡，垃圾回收指的是刷新三節點變化的數據庫寫入。  - 全節點存儲每 128 個週期和最近 128 個區塊的信息。  - 存檔節點存儲每個區塊的信息。                                                                                              |
| 工作          | CN       | **Commit new mining work** number=14 hash=438ef7…68ca7f txs=0 elapsed=605.375µs commitTime=184.708µs finalizeTime=414.375µs                                                                                                       | 每個 CN 都會挖掘一個區塊，為輪換做準備 - number：區塊編號 - hash：區塊哈希值（不是最終版本） - txs：區塊中的事務數量 - elapsed：區塊挖掘總時間（commitTime + finalizeTime） - commitTime：區塊中的事務執行時間 - finalizeTime：區塊最終確定時間                                                                                                                                                                                                                                                              |
| 工作          | CN       | **Successfully sealed new block** number=14 hash=13cbfc…f007fc                                                                                                                                                                                                                    | [唯一投標人] 封閉新區塊成功。 密封包含接下來的步驟。  - 區塊的 Ibft 共識進程。  - 更新區塊的時間戳和簽名                                                                                                                                                                                                                                                                                                                 |
| 工作          | CN       | **Successfully wrote mined block** num=14 hash=13cbfc…f007fc txs=0 elapsed=617.709µs                                                                                                                                                                              | [僅提議者] 如果節點是提議者，並且共識成功，提議者需要將區塊執行結果存儲到數據庫中。 該日誌表示存儲成功。                                                                                                                                                                                                                                                                                                                        |
| 工作          | CN       | **Mining too far in the future** wait=1s                                                                                                                                                                                                                                          | 為了保持 1 秒鐘的區塊創建週期，節點的休眠時間為 "1 秒-上一個區塊的生成/傳播/執行時間"。  - 等待：節點的休眠時間                                                                                                                                                                                                                                                                                                                                                                   |
| 虛擬機         | CN/PN/EN | **Returning since the addr is not a program account** addr=                                                                                                                                                                                                                       | 有人試圖調用不存在的合同。  小貼士 在 Kaia 中，程序賬戶等同於合同賬戶。                                                                                                                                                                                                                                                                                                                                                                                          |
