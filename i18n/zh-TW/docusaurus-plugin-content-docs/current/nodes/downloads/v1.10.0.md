# v1.10.0

## 軟件包下載

### 轉速<a id="rpm"></a>

賽普拉斯套餐

- [kcnd-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kcnd-v1.10.0-0.el7.x86_64.rpm)
- [kpnd-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kpnd-v1.10.0-0.el7.x86_64.rpm)
- [kend-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kend-v1.10.0-0.el7.x86_64.rpm)

猴麵包樹套餐

- [kcnd-baobab-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kcnd-baobab-v1.10.0-0.el7.x86_64.rpm)
- [kpnd-baobab-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kpnd-baobab-v1.10.0-0.el7.x86_64.rpm)
- [kend-baobab-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kend-baobab-v1.10.0-0.el7.x86_64.rpm)

通用軟件包

- [kscnd-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kscnd-v1.10.0-0.el7.x86_64.rpm)
- [kspnd-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kspnd-v1.10.0-0.el7.x86_64.rpm)
- [ksend-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/ksend-v1.10.0-0.el7.x86_64.rpm)
- [kbnd-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kbnd-v1.10.0-0.el7.x86_64.rpm)
- [kgen-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kgen-v1.10.0-0.el7.x86_64.rpm)
- [homi-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/homi-v1.10.0-0.el7.x86_64.rpm)

### 利納克斯<a id="linux"></a>

賽普拉斯套餐

- [kcn-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kcn-v1.10.0-0-linux-amd64.tar.gz)
- [kpn-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kpn-v1.10.0-0-linux-amd64.tar.gz)
- [ken-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ken-v1.10.0-0-linux-amd64.tar.gz)

猴麵包樹套餐

- [kcn-baobab-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kcn-baobab-v1.10.0-0-linux-amd64.tar.gz)
- [kpn-baobab-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kpn-baobab-v1.10.0-0-linux-amd64.tar.gz)
- [ken-baobab-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ken-baobab-v1.10.0-0-linux-amd64.tar.gz)

通用軟件包

- [kscn-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kscn-v1.10.0-0-linux-amd64.tar.gz)
- [kspn-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kspn-v1.10.0-0-linux-amd64.tar.gz)
- [ksen-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ksen-v1.10.0-0-linux-amd64.tar.gz)
- [kbn-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kbn-v1.10.0-0-linux-amd64.tar.gz)
- [kgen-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kgen-v1.10.0-0-linux-amd64.tar.gz)
- [homi-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/homi-v1.10.0-0-linux-amd64.tar.gz)

### MacOS<a id="macos"></a>

賽普拉斯套餐

- [kcn-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kcn-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [kpn-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kpn-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [ken-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ken-v1.10.0-0-darwin-10.10-amd64.tar.gz)

猴麵包樹套餐

- [kcn-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kcn-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [kpn-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kpn-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [ken-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ken-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz)

通用軟件包

- [kscn-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kscn-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [kspn-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kspn-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [ksen-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ksen-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [kbn-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kbn-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [kgen-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kgen-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [homi-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/homi-v1.10.0-0-darwin-10.10-amd64.tar.gz)

### 視窗<a id="windows"></a>

- 尚未支持

## 發佈說明

Klaytn v1.10.0 包含一個硬分叉升級，會導致向後不兼容的更改。 因此，所有 Baobab/Cypress 節點都必須在目標區塊編號之前升級到 v1.10.0 或更高版本。 硬叉的名稱是 "Kore"。 硬分叉包含鏈上治理投票方法的實現（[KIP81](https://kips.klaytn.foundation/KIPs/kip-81)）、新的 GC 獎勵結構（[KIP82](https://kips.klaytn.foundation/KIPs/kip-82)）和 EVM 更改。

計劃的硬叉時間表如下：

- 波巴布`111736800` 1月10日上午10:00（世界協調時+9
- 賽普拉斯2023 年 3 月，將在下一次發佈時公佈

## 關於 v1.10.0 升級和 Kore 硬分叉的注意事項

以下是 Klaytn 生態系統參與者的一些重要注意事項。 在應用 v1.10.0 升級和 Kore 硬分叉之前，請閱讀本文檔。

- 用於區塊探索器（Scope、Finder）和治理分析工具
  - Kore 硬分叉後，將根據 KIP-81 在智能合約中處理治理投票。 現有的區塊頭投票機制將僅作為基於合約的投票機制的備用機制。 可通過 `governance_chainConfigAt(num)` 或 `klay_chainConfigAt(num)` API 獲取最終治理數據。 更詳細的投票數據分析文件將在部署治理合同後發佈。
  - 在 Kore 硬分叉後，區塊獎勵將根據 KIP-82 分配給所有有效的記錄者（CN）和區塊提議者。 在選擇建議者時將不考慮基尼係數，從而使建議者之間的獎勵分配更加公平。 可通過新的 `klay_getRewards(num)` API 獲取獎勵分配詳情，包括燃燒金額。

- 對於節點操作員
  - 所有節點都應在 Kore 硬分叉區塊編號之前將其版本更新為 v1.10.0。 在確認硬分叉在 Baobab 網絡中的安全性後，將在下一個 Klaytn 版本中指定柏樹硬分叉的區塊編號。
  - 升級 v1.10.0 後，默認情況下 NTP 時間同步將必不可少。 如果節點難以與 NTP 服務器同步，請在節點配置中添加 `--ntp.disable` 標誌。
  - 升級 v1.10.0 後，節點操作員可以使用 `rpc.unsafe-debug.disable` 標記限制調試 API 的某些功能。 雖然調試 API 本應向可信用戶開放，但某些 API 一旦暴露給惡意用戶，就會引發嚴重問題。 請查看[本 PR](https://github.com/klaytn/klaytn/pull/1746)中 "更多評論 "部分有關限制的詳細信息。
  - 升級 v1.10.0 後，將引入新的節點標誌：snapshot"、"--ntp.disable"、"--ntp.server"、"--rpc.evmtimeout"。 詳情請閱讀下文。

- 針對 dApp 開發人員
  - 升級 v1.10.0 後，節點操作員可以通過設置特殊配置來限制調試 API 的某些功能。 請查看[本 PR](https://github.com/klaytn/klaytn/pull/1746)中 "更多評論 "部分有關限制的詳細信息。
  - 在 Kore hardfork 之後，"opDifficulty "將被採用 EIP-4399 的 "opRandom "所取代。 這意味著操作碼 0x44 將返回該數據塊的上一個分塊斜槓，而不是該數據塊的難度。
  - 在 Kore hardfork 之後，"SLOAD"、"_CALL"、"BALANCE"、"EXT_"和 "SELFDESTRUCT "的氣體成本將在交易中首次使用時增加，而在第二次使用後，隨著 EIP-2929 的採用而降低。 而 "ModExp "預編譯合同的天然氣成本將隨著 EIP-2565 的通過而確定。
  - 在 Kore hardfork 之後，"SELFDESTRUCT "和 "SSTORE "的氣體退款將隨著 EIP-3529 的採用而減少。
  - Kore 硬分叉後，採用 EIP-3541 後，以 0xEF 字節開頭的新合約將無法部署。

- 生態系統參與者、
  - 升級 v1.10.0 後，在區塊提議者選擇中將禁用基尼係數。 這意味著所有 CN 將以偶數概率生成區塊。 獎勵將根據 KIP-82 以另一種方式分配。 區塊鑄幣量中的一部分分配給造幣商，與每個 CN 的 KLAY 造幣量成正比。

## 協議升級（Kore Hardfork）功能

Kore 硬分叉的新功能將根據 Baobab 和 Cypress 網絡各自的硬分叉區塊編號應用於這兩個網絡。

- 所有委員會成員都有平等機會當選街區提案人（#1655）
- KIP-81：實施鏈上治理投票方法（#1512 #1604 #1614 #1623 #1639 #1640 #1711）
- 升級支持基於合同的鏈上治理機制
- 將治理配置存儲在塊標頭或治理參數合約上
- KIP-82：取消基尼係數後新的 GC 獎勵結構 (#1631 #1642 #1666 #1692 #1709 #1727 #1729 #1734)
  - 將區塊提議獎勵分為鑄幣獎勵和定金獎勵
  - 為每一代區塊的有效認注者分配認注獎勵以及區塊提議者獎勵
- 引入 "klay_getRewards "應用程序接口，返回獎勵分配詳情，包括特定區塊的燃燒量
- EIP-2565：ModExp 天然氣成本 (#1705)
- EIP-2929：國家接入操作碼的氣體成本增加 (#1705)
- EIP-3529：退款減少 (#1705)
- EIP-3541：拒絕以 0xEF 字節開始的新合同代碼 (#1681)
- EIP-4399：用 RANDOM 取代 DIFFICULTY 操作碼 (#1680)

### 改進

- 使 `client.Client` 能夠設置新的 HTTP 標頭 (#1632)
- 添加了引入"--快照 "標誌的異步快照數據生成功能 (#1634)
- 增強了與 NTP 的時間同步功能，並引入了 NTP 配置標記"--ntp.disable "和"--ntp.server"（#1641 #1651 #1669）
- 引入 gorilla websocket 庫並啟用雙向通信 (#1652)
- 更新了 DeriveSha 實現類型以兼容以太坊，並將其列為治理項目（#1648 #1689 #1693 #1708 #1716）
- 降低 RPC 服務器的內存使用率 (#1650)
- 為 `klay_getLogs` API 添加了 blockHash 過濾器選項 (#1653)
- 調試_setHead API 接受十進制塊編號 (#1697)
- 添加了 "快照 "子命令以驗證狀態數據庫（#1701）
- 引入了 `governance_chainConfigAt` API 並完善了 `governance_chainConfig` 以支持升級後的治理功能（#1704 #1724）
- 引入 "rpc.unsafe-debug.disable "標記，可限制調試應用程序接口中相對脆弱的功能，以確保節點免受異常應用程序接口的影響（#GHSA-4vx6-m7jv-g2ch #1722 1746）
- 支持 `klay` 命名空間和 `governance` 命名空間中的 `getStakingInfo`、`nodeAddress`、`chainConfig` 和 `chainConfigAt`, `govParamsAt` API。 (#1731)
- 引入 EVM 執行超時標誌 `--rpc.evmtimeout`，以通過節點操作員管理節點資源 (#1736)

### 修復

- 緩解了在 ERC721 傳輸過程中服務鏈橋操作員意外耗盡氣體的問題（#1445）
- 修正了非加權隨機提案人選擇的零訪問問題（#1600）
- 修正了通過備份附加塊強制終止進程導致的罕見數據庫損壞問題（#1630）
- 處理後將存儲快照數據刷新到數據庫中（#1635）
- 修正了伊斯坦布爾共識引擎中始終驗證 CommittedSeals 的問題 (#1678)
- 解決了因調用 `debug.traceBlock` API 而導致的 `gov.changeSet` 損壞問題 (#1706)
- 修正了在 `klay_getLogs` API 中未應用塊範圍過濾器的問題 (#1715)
- 修正了在 eth_getProof API 中始終使用 EmptyRootHashOriginal (#1726)

### 雜項

- 在普羅米修斯度量標準中添加 Klaytn 二進制版本信息（#1488）
- 為 chaindatafetcher 提供更好的可讀性和更多信息（#1587 #1611）
- 集成 Datadog HTTP 跟蹤器（#1594 #1730）
- 增強了何米生成獎勵賬戶密鑰存儲的功能，使其具有 `reward#` 文件名 (#1605)
- 為 MagmaHeader 驗證添加了 nil 檢查邏輯 (#1608)
- 修改 Dockerfile 以支持 golang 中的 TLS 連接 (#1616)
- 將 "因地址不是程序賬戶而返回 "的日誌級別降至調試級別 (#1643)
- 將 P2P 消息傳遞協議的大小限制從 10MB 提高到 12MB (#1658)
- 更新了霍米，以便為服務鏈創世分配更多餘額 (#1683)
- 從 homi 中的 yaml 配置生成 genesis.json、密鑰和其他內容 (#1661)
- 小更新（#1552 #1575 #1598 #1638 #1639 #1640 #1667 #1668 #1685 #1696 #1714 #1717 #1718 #1720 #1723 #1725 #1735）
