# v1.7.0

## パッケージダウンロード

### 回転数<a id="rpm"></a>

サイプレス・パッケージ

- [kcnd-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kcnd-v1.7.0-0.el7.x86_64.rpm)
- [kpnd-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kpnd-v1.7.0-0.el7.x86_64.rpm)
- [kend-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kend-v1.7.0-0.el7.x86_64.rpm)

バオバブ・パッケージ

- [kcnd-baobab-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kcnd-baobab-v1.7.0-0.el7.x86_64.rpm)
- [kpnd-baobab-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kpnd-baobab-v1.7.0-0.el7.x86_64.rpm)
- [kend-baobab-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kend-baobab-v1.7.0-0.el7.x86_64.rpm)

共通パッケージ

- [kscnd-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kscnd-v1.7.0-0.el7.x86_64.rpm)
- [kspnd-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kspnd-v1.7.0-0.el7.x86_64.rpm)
- [ksend-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/ksend-v1.7.0-0.el7.x86_64.rpm)
- [kbnd-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kbnd-v1.7.0-0.el7.x86_64.rpm)
- [kgen-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kgen-v1.7.0-0.el7.x86_64.rpm)
- [homi-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/homi-v1.7.0-0.el7.x86_64.rpm)

### リナックス<a id="linux"></a>

サイプレス・パッケージ

- [kcn-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kcn-v1.7.0-0-linux-amd64.tar.gz)
- [kpn-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kpn-v1.7.0-0-linux-amd64.tar.gz)
- [ken-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/ken-v1.7.0-0-linux-amd64.tar.gz)

バオバブ・パッケージ

- [kcn-baobab-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kcn-baobab-v1.7.0-0-linux-amd64.tar.gz)
- [kpn-baobab-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kpn-baobab-v1.7.0-0-linux-amd64.tar.gz)
- [ken-baobab-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/ken-baobab-v1.7.0-0-linux-amd64.tar.gz)

共通パッケージ

- [kscn-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kscn-v1.7.0-0-linux-amd64.tar.gz)
- [kspn-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kspn-v1.7.0-0-linux-amd64.tar.gz)
- [ksen-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/ksen-v1.7.0-0-linux-amd64.tar.gz)
- [kbn-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kbn-v1.7.0-0-linux-amd64.tar.gz)
- [kgen-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kgen-v1.7.0-0-linux-amd64.tar.gz)
- [homi-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/homi-v1.7.0-0-linux-amd64.tar.gz)

### マックオス<a id="macos"></a>

サイプレス・パッケージ

- [kcn-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kcn-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [kpn-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kpn-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [ken-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/ken-v1.7.0-0-darwin-10.10-amd64.tar.gz)

バオバブ・パッケージ

- [kcn-baobab-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kcn-baobab-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [kpn-baobab-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kpn-baobab-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [ken-baobab-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/ken-baobab-v1.7.0-0-darwin-10.10-amd64.tar.gz)

共通パッケージ

- [kscn-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kscn-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [kspn-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kspn-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [ksen-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/ksen-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [kbn-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kbn-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [kgen-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kgen-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [homi-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/homi-v1.7.0-0-darwin-10.10-amd64.tar.gz)

### ウィンドウズ<a id="windows"></a>

- 未対応

## リリースノート

Klaytn v1.7.0には、Ethereum Hard-forksのような互換性のない変更をもたらす可能性のあるプロトコルのアップグレードのための重要な変更が含まれています。
このバージョンは11月15日に予定されているブロック#75373312のBaobabテストネットのプロトコルアップグレードを可能にします。 サイプレスのメインネットは、次のバージョンで同じプロトコルのアップグレードを受ける。

## プロトコルのアップグレード機能

- イーサリアムのイスタンブール・ハードフォーク項目を紹介
  - EIP-152：アドレス0x09にプリコンパイルされたコントラクト、BLAKE2Fを導入 (#960 #1010)
  - EIP-1108：コンパイル済みコントラクト、ECADD、ECMUL、ペアリングチェックのガスコストを再価格化 (#987)
  - EIP-1344：新しいオペコード CHAINID を 0x46 に導入 (#952)
  - EIP-1844：新しいオペコード SELFBALANCE を 0x47 に導入。 SLOAD、BALANCE、EXTCODEHASHのガスコストを再計算します（#958）。
  - EIP-2200：オペコードSSTOREのガス計測アルゴリズムを変更 (#996)

- Klaytnのコンパイル済み契約のアドレスを移動 (#912)
  - vmLog：0x09 → 0x3fd
  - feePayer：0x0a → 0x3fe
  - validateSender：0x0b → 0x3ff
  - 互換性のない変更が有効化される前にデプロイされたコントラクトは、有効化後に実行されたトランザクションでも、以前と同じように機能し続ける。

- レガシー型トランザクションのデータフィールドのガス計算ロジックを変更 (#986)
  - この変更により、すべての取引タイプに同じデータ手数料計算ロジックが適用されます。

- マルチシグ・トランザクションのバリデーションとガス計算ロジックの強化 (#1001)
  - マルチシグ取引の署名検証手数料は、一意の署名数に比例する。
  - 口座のaccountKeyの最大数を超える署名を含む取引は無効である。
  - 少なくとも1つの無効な署名を含むトランザクションは無効である。

- 高価なオペコードの計算コストを削減 (#1033)
  - 影響を受けるオペコード：addmod、mulmod、not、xor、shl、shr、sar。

- バリデーターの最低賭け金をガバナンス項目として導入 (#920 #963 #1023 #1024 #1034)
  - バリデーターが十分なKLAYをステークしていない場合、そのノードは提案者としても委員としても選ばれない。

- ラウンドが変わるたびに新しい委員会メンバーをランダムに選出するようにしました(#997)

### 新機能

- ブロックヘッダを返す2つのklaytn APIを導入しました: klay_getHeaderByNumberとklay_getHeaderByHash (#975)
- 降格したバリデータを返す2つのistanbul APIを導入 (#974)
  - istanbul_getDemotedValidators：指定したブロック番号で降格したバリデータを返します。
  - istanbul_getDemotedValidatorsAtHash：指定したブロックハッシュで降格したバリデータを返します。
  - 降格バリデーターはバリデーターの一人であるが、KLAYのステーキングが不十分であるため、提案者にも委員にもなれない。
- ジェネシスブロックをJSON形式で返すdumpgenesisコマンドを導入しました(#992)。
- DynamoS3DBにCustomRetryerを導入し、すべてのエラーケースでリクエストを再試行するようにした (#982)
- ブロック生成時間に関連する実験的なフラグを導入 (#989)
  - BlockGenerationIntervalFlag：連続する2つのブロック間のブロック生成間隔を決定する（CNのみ）
  - BlockGenerationTimeLimitFlag: ブロック生成時の vm 実行時間制限を設定 (CN のみ)
  - OpcodeComputationCostLimitFlag: トランザクションの計算コスト制限を設定する。

### 改善点

- ブロックパラメータの型をblockNumberまたはblockHashからblockNumberOrHashに変更しました(#975)。
  - 影響を受ける APIklay_accountCreated, klay_getAccount, klay_getAccountKey, klay_getBalance, klay_getCode, klay_getTransactionCount, klay_isContractAccount, klay_getBlockByNumber, klay_getBlockTransactionCountByNumber, klay_getBlockWithConsensusInfoByNumber、klay_getCommittee, klay_getCommitteeSize, klay_getCouncil, klay_getCouncilSize, klay_getStorageAt, klay_getLogs, klay_newFilter, klay_call, klay_getTransactionByBlockNumberAndIndex, debug_dumpBlock, debug_getBlockRlp, debug_printBlock, and governance_itemsAt
- KlaytnクライアントにSetHeaderメソッドを追加しました。
- dirtyStorageをより正確に使用するようにしました。
- fastHttpServerのリクエストボディサイズの上限をmaxRequestContentlengthで設定しました。
- デバッグAPIでUseOpcodeComputationCost EVMオプションを有効にしました(#1035)。
- istanbulコンセンサスエンジンを更新し、ヘッダを同期的に検証するようにした (#957)
- 単一型以外のDBをサポートするために状態移行機能を強化 (#954)

### 修正

- state.NewForPrefetchingの異常なリターンを処理しました。
- エッジケースにおけるガバナンス投票の異常な適用を修正 (#1018)

### その他

- 2つの管理APIの名前を変更しました。
  - admin_startRPC → admin_startHTTP
  - admin_stopRPC → admin_stopHTTP
  - 古い名前は廃止されたが、まだ利用できる。
