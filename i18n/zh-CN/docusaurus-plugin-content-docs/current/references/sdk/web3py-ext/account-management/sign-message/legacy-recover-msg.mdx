# Legacy Account Key

<CH.Spotlight>
<CH.Code>

```py web3_legacy_value_transfer_message_recover.py
from eth_account import Account
from eth_account.messages import encode_defunct
from eth_utils.curried import to_hex
from web3py_ext import extend

def web3_legacy_value_transfer_sign_recover():
    user = Account.from_key('0x0e4ca6d38096ad99324de0dde108587e5d7c600165ae4cd6c2462c597458c2b8')
    message_text = "I♥KLAYTN"
    msghash = encode_defunct(text=message_text)
    signature = Account.sign_message(msghash, user.key)

    recovered = Account.recover_message(msghash, signature=signature.signature)
    print("\nsender", user.address, "\nrecovered", recovered)

web3_legacy_value_transfer_sign_recover()
```

---

```zsh output
python web3_legacy_value_transfer_message_recover.py
sender 0xA2a8854b1802D8Cd5De631E690817c253d6a9153
recovered 0xA2a8854b1802D8Cd5De631E690817c253d6a9153
```

</CH.Code>

---

从 **eth_utils** 和 **eth_account** 导入必要的实用程序

```py web3_legacy_value_transfer_message_recover.py focus=1:3

```

---

从**web3py_ext**导入**extend**，将 web3 扩展为 kaia web3

```py web3_legacy_value_transfer_message_recover.py focus=4

```

---

使用 **Account.from_key ** 从私人密钥定义钱包

```py web3_legacy_value_transfer_message_recover.py focus=7

```

---

定义要签署的任何信息

```py web3_legacy_value_transfer_message_recover.py focus=8

```

---

使用**encode_defunct**对报文进行格式化，使其与 EIP-191 标准兼容。

```py web3_legacy_value_transfer_message_recover.py focus=9

```

---

使用创建的账户签署交易

```py web3_legacy_value_transfer_message_recover.py focus=10

```

---

使用**Account.rec recover_message**从签名邮件中恢复发件人地址

<CH.Code>
```py web3_legacy_value_transfer_message_recover.py focus=12:13

````
---

```zsh output
❯ python web3_legacy_value_transfer_message_recover.py
sender 0xA2a8854b1802D8Cd5De631E690817c253d6a9153
recovered 0xA2a8854b1802D8Cd5De631E690817c253d6a9153
````

</CH.Code>
</CH.Spotlight>
