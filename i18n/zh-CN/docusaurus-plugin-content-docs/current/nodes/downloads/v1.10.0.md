# v1.10.0

## 软件包下载

### 转速<a id="rpm"></a>

赛普拉斯套餐

- [kcnd-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kcnd-v1.10.0-0.el7.x86_64.rpm)
- [kpnd-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kpnd-v1.10.0-0.el7.x86_64.rpm)
- [kend-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kend-v1.10.0-0.el7.x86_64.rpm)

猴面包树套餐

- [kcnd-baobab-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kcnd-baobab-v1.10.0-0.el7.x86_64.rpm)
- [kpnd-baobab-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kpnd-baobab-v1.10.0-0.el7.x86_64.rpm)
- [kend-baobab-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kend-baobab-v1.10.0-0.el7.x86_64.rpm)

通用软件包

- [kscnd-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kscnd-v1.10.0-0.el7.x86_64.rpm)
- [kspnd-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kspnd-v1.10.0-0.el7.x86_64.rpm)
- [ksend-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/ksend-v1.10.0-0.el7.x86_64.rpm)
- [kbnd-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kbnd-v1.10.0-0.el7.x86_64.rpm)
- [kgen-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kgen-v1.10.0-0.el7.x86_64.rpm)
- [homi-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/homi-v1.10.0-0.el7.x86_64.rpm)

### 利纳克斯<a id="linux"></a>

赛普拉斯套餐

- [kcn-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kcn-v1.10.0-0-linux-amd64.tar.gz)
- [kpn-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kpn-v1.10.0-0-linux-amd64.tar.gz)
- [ken-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ken-v1.10.0-0-linux-amd64.tar.gz)

猴面包树套餐

- [kcn-baobab-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kcn-baobab-v1.10.0-0-linux-amd64.tar.gz)
- [kpn-baobab-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kpn-baobab-v1.10.0-0-linux-amd64.tar.gz)
- [ken-baobab-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ken-baobab-v1.10.0-0-linux-amd64.tar.gz)

通用软件包

- [kscn-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kscn-v1.10.0-0-linux-amd64.tar.gz)
- [kspn-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kspn-v1.10.0-0-linux-amd64.tar.gz)
- [ksen-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ksen-v1.10.0-0-linux-amd64.tar.gz)
- [kbn-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kbn-v1.10.0-0-linux-amd64.tar.gz)
- [kgen-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kgen-v1.10.0-0-linux-amd64.tar.gz)
- [homi-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/homi-v1.10.0-0-linux-amd64.tar.gz)

### MacOS<a id="macos"></a>

赛普拉斯套餐

- [kcn-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kcn-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [kpn-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kpn-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [ken-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ken-v1.10.0-0-darwin-10.10-amd64.tar.gz)

猴面包树套餐

- [kcn-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kcn-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [kpn-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kpn-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [ken-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ken-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz)

通用软件包

- [kscn-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kscn-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [kspn-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kspn-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [ksen-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ksen-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [kbn-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kbn-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [kgen-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kgen-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [homi-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/homi-v1.10.0-0-darwin-10.10-amd64.tar.gz)

### 视窗<a id="windows"></a>

- 尚未支持

## 发布说明

Klaytn v1.10.0 包含一个硬分叉升级，会导致向后不兼容的更改。 因此，所有 Baobab/Cypress 节点都必须在目标区块编号之前升级到 v1.10.0 或更高版本。 硬叉的名称是 "Kore"。 硬分叉包含链上治理投票方法的实现（[KIP81](https://kips.klaytn.foundation/KIPs/kip-81)）、新的 GC 奖励结构（[KIP82](https://kips.klaytn.foundation/KIPs/kip-82)）和 EVM 更改。

计划的硬叉时间表如下：

- 波巴布`111736800` 1月10日上午10:00（世界协调时+9
- 赛普拉斯2023 年 3 月，将在下一次发布时公布

## 关于 v1.10.0 升级和 Kore 硬分叉的注意事项

以下是 Klaytn 生态系统参与者的一些重要注意事项。 在应用 v1.10.0 升级和 Kore 硬分叉之前，请阅读本文档。

- 用于区块探索器（Scope、Finder）和治理分析工具
  - Kore 硬分叉后，将根据 KIP-81 在智能合约中处理治理投票。 现有的区块头投票机制将仅作为基于合约的投票机制的备用机制。 可通过 `governance_chainConfigAt(num)` 或 `klay_chainConfigAt(num)` API 获取最终治理数据。 更详细的投票数据分析文件将在部署治理合同后发布。
  - 在 Kore 硬分叉后，区块奖励将根据 KIP-82 分配给所有有效的记录者（CN）和区块提议者。 在选择建议者时将不考虑基尼系数，从而使建议者之间的奖励分配更加公平。 可通过新的 `klay_getRewards(num)` API 获取奖励分配详情，包括燃烧金额。

- 对于节点操作员
  - 所有节点都应在 Kore 硬分叉区块编号之前将其版本更新为 v1.10.0。 在确认硬分叉在 Baobab 网络中的安全性后，将在下一个 Klaytn 版本中指定柏树硬分叉的区块编号。
  - 升级 v1.10.0 后，默认情况下 NTP 时间同步将必不可少。 如果节点难以与 NTP 服务器同步，请在节点配置中添加 `--ntp.disable` 标志。
  - 升级 v1.10.0 后，节点操作员可以使用 `rpc.unsafe-debug.disable` 标记限制调试 API 的某些功能。 虽然调试 API 本应向可信用户开放，但某些 API 一旦暴露给恶意用户，就会引发严重问题。 请查看[本 PR](https://github.com/klaytn/klaytn/pull/1746)中 "更多评论 "部分有关限制的详细信息。
  - 升级 v1.10.0 后，将引入新的节点标志：snapshot"、"--ntp.disable"、"--ntp.server"、"--rpc.evmtimeout"。 详情请阅读下文。

- 针对 dApp 开发人员
  - 升级 v1.10.0 后，节点操作员可以通过设置特殊配置来限制调试 API 的某些功能。 请查看[本 PR](https://github.com/klaytn/klaytn/pull/1746)中 "更多评论 "部分有关限制的详细信息。
  - 在 Kore hardfork 之后，"opDifficulty "将被采用 EIP-4399 的 "opRandom "所取代。 这意味着操作码 0x44 将返回该数据块的上一个分块斜杠，而不是该数据块的难度。
  - 在 Kore hardfork 之后，"SLOAD"、"_CALL"、"BALANCE"、"EXT_"和 "SELFDESTRUCT "的气体成本将在交易中首次使用时增加，而在第二次使用后，随着 EIP-2929 的采用而降低。 而 "ModExp "预编译合同的天然气成本将随着 EIP-2565 的通过而确定。
  - 在 Kore hardfork 之后，"SELFDESTRUCT "和 "SSTORE "的气体退款将随着 EIP-3529 的采用而减少。
  - Kore 硬分叉后，采用 EIP-3541 后，以 0xEF 字节开头的新合约将无法部署。

- 生态系统参与者、
  - 升级 v1.10.0 后，在区块提议者选择中将禁用基尼系数。 这意味着所有 CN 将以偶数概率生成区块。 奖励将根据 KIP-82 以另一种方式分配。 区块铸币量中的一部分分配给造币商，与每个 CN 的 KLAY 造币量成正比。

## 协议升级（Kore Hardfork）功能

Kore 硬分叉的新功能将根据 Baobab 和 Cypress 网络各自的硬分叉区块编号应用于这两个网络。

- 所有委员会成员都有平等机会当选街区提案人（#1655）
- KIP-81：实施链上治理投票方法（#1512 #1604 #1614 #1623 #1639 #1640 #1711）
- 升级支持基于合同的链上治理机制
- 将治理配置存储在块标头或治理参数合约上
- KIP-82：取消基尼系数后新的 GC 奖励结构 (#1631 #1642 #1666 #1692 #1709 #1727 #1729 #1734)
  - 将区块提议奖励分为铸币奖励和定金奖励
  - 为每一代区块的有效认注者分配认注奖励以及区块提议者奖励
- 引入 "klay_getRewards "应用程序接口，返回奖励分配详情，包括特定区块的燃烧量
- EIP-2565：ModExp 天然气成本 (#1705)
- EIP-2929：国家接入操作码的气体成本增加 (#1705)
- EIP-3529：退款减少 (#1705)
- EIP-3541：拒绝以 0xEF 字节开始的新合同代码 (#1681)
- EIP-4399：用 RANDOM 取代 DIFFICULTY 操作码 (#1680)

### 改进

- 使 `client.Client` 能够设置新的 HTTP 标头 (#1632)
- 添加了引入"--快照 "标志的异步快照数据生成功能 (#1634)
- 增强了与 NTP 的时间同步功能，并引入了 NTP 配置标记"--ntp.disable "和"--ntp.server"（#1641 #1651 #1669）
- 引入 gorilla websocket 库并启用双向通信 (#1652)
- 更新了 DeriveSha 实现类型以兼容以太坊，并将其列为治理项目（#1648 #1689 #1693 #1708 #1716）
- 降低 RPC 服务器的内存使用率 (#1650)
- 为 `klay_getLogs` API 添加了 blockHash 过滤器选项 (#1653)
- 调试_setHead API 接受十进制块编号 (#1697)
- 添加了 "快照 "子命令以验证状态数据库（#1701）
- 引入了 `governance_chainConfigAt` API 并完善了 `governance_chainConfig` 以支持升级后的治理功能（#1704 #1724）
- 引入 "rpc.unsafe-debug.disable "标记，可限制调试应用程序接口中相对脆弱的功能，以确保节点免受异常应用程序接口的影响（#GHSA-4vx6-m7jv-g2ch #1722 1746）
- 支持 `klay` 命名空间和 `governance` 命名空间中的 `getStakingInfo`、`nodeAddress`、`chainConfig` 和 `chainConfigAt`, `govParamsAt` API。 (#1731)
- 引入 EVM 执行超时标志 `--rpc.evmtimeout`，以通过节点操作员管理节点资源 (#1736)

### 修复

- 缓解了在 ERC721 传输过程中服务链桥操作员意外耗尽气体的问题（#1445）
- 修正了非加权随机提案人选择的零访问问题（#1600）
- 修正了通过备份附加块强制终止进程导致的罕见数据库损坏问题（#1630）
- 处理后将存储快照数据刷新到数据库中（#1635）
- 修正了伊斯坦布尔共识引擎中始终验证 CommittedSeals 的问题 (#1678)
- 解决了因调用 `debug.traceBlock` API 而导致的 `gov.changeSet` 损坏问题 (#1706)
- 修正了在 `klay_getLogs` API 中未应用块范围过滤器的问题 (#1715)
- 修正了在 eth_getProof API 中始终使用 EmptyRootHashOriginal (#1726)

### 杂项

- 在普罗米修斯度量标准中添加 Klaytn 二进制版本信息（#1488）
- 为 chaindatafetcher 提供更好的可读性和更多信息（#1587 #1611）
- 集成 Datadog HTTP 跟踪器（#1594 #1730）
- 增强了何米生成奖励账户密钥存储的功能，使其具有 `reward#` 文件名 (#1605)
- 为 MagmaHeader 验证添加了 nil 检查逻辑 (#1608)
- 修改 Dockerfile 以支持 golang 中的 TLS 连接 (#1616)
- 将 "因地址不是程序账户而返回 "的日志级别降至调试级别 (#1643)
- 将 P2P 消息传递协议的大小限制从 10MB 提高到 12MB (#1658)
- 更新了霍米，以便为服务链创世分配更多余额 (#1683)
- 从 homi 中的 yaml 配置生成 genesis.json、密钥和其他内容 (#1661)
- 小更新（#1552 #1575 #1598 #1638 #1639 #1640 #1667 #1668 #1685 #1696 #1714 #1717 #1718 #1720 #1723 #1725 #1735）
