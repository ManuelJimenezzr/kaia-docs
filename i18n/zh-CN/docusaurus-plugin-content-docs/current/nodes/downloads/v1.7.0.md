# v1.7.0

## 软件包下载

### 转速<a id="rpm"></a>

赛普拉斯套餐

- [kcnd-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kcnd-v1.7.0-0.el7.x86_64.rpm)
- [kpnd-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kpnd-v1.7.0-0.el7.x86_64.rpm)
- [kend-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kend-v1.7.0-0.el7.x86_64.rpm)

猴面包树套餐

- [kcnd-baobab-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kcnd-baobab-v1.7.0-0.el7.x86_64.rpm)
- [kpnd-baobab-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kpnd-baobab-v1.7.0-0.el7.x86_64.rpm)
- [kend-baobab-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kend-baobab-v1.7.0-0.el7.x86_64.rpm)

通用软件包

- [kscnd-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kscnd-v1.7.0-0.el7.x86_64.rpm)
- [kspnd-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kspnd-v1.7.0-0.el7.x86_64.rpm)
- [ksend-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/ksend-v1.7.0-0.el7.x86_64.rpm)
- [kbnd-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kbnd-v1.7.0-0.el7.x86_64.rpm)
- [kgen-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/kgen-v1.7.0-0.el7.x86_64.rpm)
- [homi-v1.7.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.7.0/homi-v1.7.0-0.el7.x86_64.rpm)

### 利纳克斯<a id="linux"></a>

赛普拉斯套餐

- [kcn-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kcn-v1.7.0-0-linux-amd64.tar.gz)
- [kpn-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kpn-v1.7.0-0-linux-amd64.tar.gz)
- [ken-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/ken-v1.7.0-0-linux-amd64.tar.gz)

猴面包树套餐

- [kcn-baobab-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kcn-baobab-v1.7.0-0-linux-amd64.tar.gz)
- [kpn-baobab-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kpn-baobab-v1.7.0-0-linux-amd64.tar.gz)
- [ken-baobab-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/ken-baobab-v1.7.0-0-linux-amd64.tar.gz)

通用软件包

- [kscn-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kscn-v1.7.0-0-linux-amd64.tar.gz)
- [kspn-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kspn-v1.7.0-0-linux-amd64.tar.gz)
- [ksen-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/ksen-v1.7.0-0-linux-amd64.tar.gz)
- [kbn-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kbn-v1.7.0-0-linux-amd64.tar.gz)
- [kgen-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kgen-v1.7.0-0-linux-amd64.tar.gz)
- [homi-v1.7.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/homi-v1.7.0-0-linux-amd64.tar.gz)

### MacOS<a id="macos"></a>

赛普拉斯套餐

- [kcn-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kcn-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [kpn-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kpn-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [ken-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/ken-v1.7.0-0-darwin-10.10-amd64.tar.gz)

猴面包树套餐

- [kcn-baobab-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kcn-baobab-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [kpn-baobab-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kpn-baobab-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [ken-baobab-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/ken-baobab-v1.7.0-0-darwin-10.10-amd64.tar.gz)

通用软件包

- [kscn-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kscn-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [kspn-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kspn-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [ksen-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/ksen-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [kbn-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kbn-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [kgen-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/kgen-v1.7.0-0-darwin-10.10-amd64.tar.gz)
- [homi-v1.7.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.7.0/homi-v1.7.0-0-darwin-10.10-amd64.tar.gz)

### 视窗<a id="windows"></a>

- 尚未支持

## 发布说明

Klaytn v1.7.0 包含协议升级的重要变更，可能会导致以太坊硬叉等不兼容变更。
该版本可在区块 #75373312 上对 Baobab 测试网络进行协议升级，预计时间为 11 月 15 日。 赛普拉斯主网将在下一个版本中进行同样的协议升级。

## 协议升级功能

- 介绍以太坊伊斯坦布尔硬分叉项目
  - EIP-152：在地址 0x09 引入预编译合约 BLAKE2F (#960 #1010)
  - EIP-1108：重新调整预编译合同、ECADD、ECMUL 和配对检查的气体成本 (#987)
  - EIP-1344：在 0x46 位置引入新操作码 CHAINID (#952)
  - EIP-1844：引入新操作码 SELFBALANCE，值为 0x47。 它重新计算了 SLOAD、BALANCE 和 EXTCODEHASH 的气体成本 (#958)
  - EIP-2200：更改操作码 SSTORE 的气体计量算法 (#996)

- 移动 Klaytn 预编译合同的地址 (#912)
  - vmLog：0x09 → 0x3fd
  - 付费者：0x0a → 0x3fe
  - validateSender：0x0b → 0x3ff
  - 在不兼容变更激活前部署的合约将继续运行，即使在激活后执行的事务中也是如此。

- 更改传统类型交易数据字段的气体计算逻辑 (#986)
  - 作出这一更改后，所有交易类型都将采用相同的数据费计算逻辑。

- 增强多重签名交易的验证和气体计算逻辑 (#1001)
  - 多重签名交易的签名验证费用与唯一签名的数量成正比。
  - 包含的签名数超过账户的 accountKey 最大值的交易无效。
  - 包含至少一个无效签名的交易无效。

- 降低超价操作码的计算成本 (#1033)
  - 受影响的操作码：addmod、mulmod、not、xor、shl、shr 和 sar。

- 引入验证人的最低注资额作为治理项目（#920 #963 #1023 #1024 #1034）
  - 如果验证人没有足够的 KLAY 股权，该节点将不会被选为提案人或委员会成员。

- 每轮更换时随机选择新的委员会成员 (#997)

### 新功能

- 引入两个返回块头的 klaytn API：klay_getHeaderByNumber 和 klay_getHeaderByHash (#975)
- 引入两个返回降级验证器的伊斯坦布尔应用程序接口 (#974)
  - istanbul_getDemotedValidators：返回给定区块编号下的降级验证器。
  - istanbul_getDemotedValidatorsAtHash：返回给定区块哈希值的降级验证器。
  - 被降级的审定人是审定人之一，但由于没有足够的 KLAY 股权，不能成为提案人或委员会成员。
- 引入 dumpgenesis 命令，以 JSON 格式返回创世块 (#992)
- 为 DynamoS3DB 引入 CustomRetryer，以重试所有错误情况下的请求 (#982)
- 引入与区块生成时间相关的实验标志 (#989)
  - BlockGenerationIntervalFlag：确定两个连续数据块之间的数据块生成间隔（仅适用于 CN）
  - BlockGenerationTimeLimitFlag: 设置块生成过程中的虚拟机执行时间限制（仅适用于 CN）
  - OpcodeComputationCostLimitFlag: 设置交易的计算成本限制

### 改进

- 将块参数类型从块编号（blockNumber）或块哈希（blockHash）改为块编号或哈希（blockNumberOrHash） (#975)
  - 受影响的 API：klay_accountCreated, klay_getAccount, klay_getAccountKey, klay_getBalance, klay_getCode, klay_getTransactionCount, klay_isContractAccount, klay_getBlockByNumber, klay_getBlockTransactionCountByNumber, klay_getBlockWithConsensusInfoByNumber、klay_getCommittee, klay_getCommitteeSize, klay_getCouncil, klay_getCouncilSize, klay_getStorageAt, klay_getLogs, klay_newFilter, klay_call, klay_getTransactionByBlockNumberAndIndex, debug_dumpBlock, debug_getBlockRlp, debug_printBlock, 和 governance_itemsAt
- 为 Klaytn 客户端添加了 SetHeader 方法（#1020）
- 更准确地利用 dirtyStorage（#993）
- 使用 maxRequestContentlength 设置 fastHttpServer 的请求正文大小限制 (#1029)
- 在调试 API 上启用 UseOpcodeComputationCost EVM 选项 (#1035)
- 更新伊斯坦布尔共识引擎以同步验证标头（#957）
- 增强了状态迁移功能，以支持非单一类型 DB (#954)

### 修复

- 处理 state.NewForPrefetching 的异常返回 (#1011)
- 修正了边缘情况下异常应用治理投票的问题 (#1018)

### 杂项

- 重命名两个管理应用程序接口（#971）
  - admin_startRPC → admin_startHTTP
  - admin_stopRPC → admin_stopHTTP
  - 旧名称已被弃用，但仍可使用。
